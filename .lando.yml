name: bedrock
recipe: wordpress
env_file:
  - .env
config:
  php: 8.1 
  composer_version: 2-latest
  webroot: web
  database: mariadb
  xdebug: true

services:
  theme:
    type: node:18
    command: cd web/app/themes/sage && yarn dev
    build:
      - cd web/app/themes/sage && yarn
    overrides:
      ports:
        - 3000:3000
        - 3001:3001

tooling:
  yarn:
    service: theme

excludes:
  - vendor
  - node_modules